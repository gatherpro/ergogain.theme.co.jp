{{ 'about-hero.css' | asset_url | stylesheet_tag }}

{%- style -%}
  #eg-about-{{ section.id }} {
    --py: {{ section.settings.padding_y }}px;
    --title: {{ section.settings.title_size }}px;
    --title-lh: {{ section.settings.title_lh }};
    --sub-max: {{ section.settings.sub_max }}px;
    --fg: {{ section.settings.fg }};
    --muted: {{ section.settings.muted }};
    --bg: {{ section.settings.bg }};
  }
{%- endstyle -%}

<section
  id="eg-about-{{ section.id }}"
  class="eg-about"
  role="region"
  aria-label="{{ section.settings.heading | escape }}"
>
  <div class="eg-about__inner">
    <div class="eg-about__text">
      {%- if section.settings.kicker != blank -%}
        <p class="eg-about__kicker">{{ section.settings.kicker }}</p>
      {%- endif -%}

      {%- if section.settings.heading != blank -%}
        <h2 class="eg-about__heading">{{ section.settings.heading }}</h2>
      {%- endif -%}

      {%- if section.settings.subtext != blank -%}
        <p class="eg-about__subtext">{{ section.settings.subtext }}</p>
      {%- endif -%}

      {%- if section.settings.primary_label != blank and section.settings.primary_link != blank -%}
        <div class="eg-about__cta">
          <a href="{{ section.settings.primary_link }}" class="eg-about__btn eg-about__btn--primary">
            {{ section.settings.primary_label }}
          </a>

          {%- if section.settings.secondary_label != blank and section.settings.secondary_link != blank -%}
            <a href="{{ section.settings.secondary_link }}" class="eg-about__btn eg-about__btn--secondary">
              {{ section.settings.secondary_label }}
            </a>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>

    <div class="eg-about__media">
      {%- if section.settings.media_type == 'video' and section.settings.video != blank -%}
        <video
          class="eg-about__video"
          {% if section.settings.poster != blank %}
            poster="{{ section.settings.poster | image_url: width: 1200 }}"
          {% endif %}
          {% if section.settings.autoplay %}
            autoplay
            muted
            loop
            playsinline
          {% endif %}
          {% if section.settings.controls %}
            controls
          {% endif %}
          width="1200"
          height="675"
        >
          <source src="{{ section.settings.video }}" type="video/mp4">
        </video>
      {%- elsif section.settings.image != blank -%}
        {%- liquid
          assign img = section.settings.image
          assign widths = '375, 550, 750, 1100, 1500, 1780, 2000, 3000'
        -%}
        <img
          class="eg-about__image"
          srcset="{%- for width in widths -%}{{ img | image_url: width: width }} {{ width }}w{%- unless forloop.last -%},{%- endunless -%}{%- endfor -%}"
          sizes="(min-width: 1024px) 50vw, 100vw"
          src="{{ img | image_url: width: 1500 }}"
          alt="{{ img.alt | escape }}"
          width="{{ img.width }}"
          height="{{ img.height }}"
          loading="lazy"
        >
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "About Hero",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Text Content"
    },
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker (optional)",
      "default": "About Us"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Designed for performance"
    },
    {
      "type": "textarea",
      "id": "subtext",
      "label": "Subtext",
      "default": "We create products that blend innovation with simplicity. Every detail matters."
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "text",
      "id": "primary_label",
      "label": "Primary Button Label",
      "default": "Learn more"
    },
    {
      "type": "url",
      "id": "primary_link",
      "label": "Primary Button Link"
    },
    {
      "type": "text",
      "id": "secondary_label",
      "label": "Secondary Button Label"
    },
    {
      "type": "url",
      "id": "secondary_link",
      "label": "Secondary Button Link"
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "select",
      "id": "media_type",
      "label": "Media Type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "video",
      "label": "Video URL (.mp4)",
      "info": "Full URL to MP4 file"
    },
    {
      "type": "image_picker",
      "id": "poster",
      "label": "Video Poster Image"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay Video",
      "default": true,
      "info": "Autoplay requires muted audio"
    },
    {
      "type": "checkbox",
      "id": "controls",
      "label": "Show Video Controls",
      "default": false
    },
    {
      "type": "header",
      "content": "Layout & Typography"
    },
    {
      "type": "range",
      "id": "padding_y",
      "min": 40,
      "max": 160,
      "step": 8,
      "unit": "px",
      "label": "Vertical Padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 32,
      "max": 72,
      "step": 4,
      "unit": "px",
      "label": "Title Size",
      "default": 48
    },
    {
      "type": "range",
      "id": "title_lh",
      "min": 1.0,
      "max": 1.6,
      "step": 0.05,
      "label": "Title Line Height",
      "default": 1.1
    },
    {
      "type": "range",
      "id": "sub_max",
      "min": 400,
      "max": 800,
      "step": 50,
      "unit": "px",
      "label": "Subtext Max Width",
      "default": 560
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "fg",
      "label": "Text Color",
      "default": "#1d1d1f"
    },
    {
      "type": "color",
      "id": "muted",
      "label": "Muted Text Color",
      "default": "#6e6e73"
    },
    {
      "type": "color",
      "id": "bg",
      "label": "Background Color",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "About Hero"
    }
  ]
}
{% endschema %}
