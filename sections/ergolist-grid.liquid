<link rel="stylesheet" href="{{ 'ergolist-grid.css' | asset_url }}">
<script src="{{ 'ergolist-grid.js' | asset_url }}" defer></script>
{%- style -%}
.eg-grid-{{section.id}}{
--eg-grid-bg:{{section.settings.eg_grid_bg}};
--eg-grid-text:{{section.settings.eg_grid_text}};
--eg-grid-pt:{{section.settings.eg_grid_padding_top}}px;
--eg-grid-pb:{{section.settings.eg_grid_padding_bottom}}px;
}
{%- endstyle -%}
{%- liquid
assign coll = collections[section.settings.eg_grid_collection]
assign per_page = section.settings.eg_grid_per_page | default: 12
-%}
<section class="eg-grid eg-grid-{{section.id}}" data-eg-grid>
<div class="eg-grid__container page-width">
{%- if section.settings.eg_grid_heading != blank -%}
<h2 class="eg-grid__heading">{{section.settings.eg_grid_heading}}</h2>
{%- endif -%}
{%- if section.settings.eg_grid_enable_filters or section.settings.eg_grid_enable_sort -%}
<div class="eg-grid__controls">
{%- if section.settings.eg_grid_enable_filters -%}
<div class="eg-grid__filters">
<select class="eg-grid__filter" data-filter="layout" aria-label="Filter by layout">
<option value="">配列：すべて</option>
<option value="split">分割</option>
<option value="unibody">一体型</option>
</select>
<select class="eg-grid__filter" data-filter="switch" aria-label="Filter by switch">
<option value="">スイッチ：すべて</option>
<option value="blue">青軸</option>
<option value="brown">茶軸</option>
<option value="red">赤軸</option>
</select>
</div>
{%- endif -%}
{%- if section.settings.eg_grid_enable_sort -%}
<select class="eg-grid__sort" data-sort aria-label="Sort products">
<option value="manual">おすすめ順</option>
<option value="price-asc">価格が低い順</option>
<option value="price-desc">価格が高い順</option>
<option value="created-desc">新着順</option>
</select>
{%- endif -%}
</div>
{%- endif -%}
<div class="eg-grid__products" data-products>
{%- if coll != blank and coll.products.size > 0 -%}
{%- for product in coll.products limit: per_page -%}
<div class="eg-grid__card" data-product>
<a href="{{product.url}}" class="eg-grid__card-link">
{%- if product.featured_media -%}
<div class="eg-grid__card-img-wrap">
<img src="{{product.featured_media | image_url: width: 600}}" alt="{{product.title | escape}}" class="eg-grid__card-img" loading="lazy">
</div>
{%- endif -%}
<div class="eg-grid__card-content">
<h3 class="eg-grid__card-title">{{product.title}}</h3>
<p class="eg-grid__card-price">
{%- if product.compare_at_price > product.price -%}
<span class="eg-grid__card-price-compare">{{product.compare_at_price | money}}</span>
{%- endif -%}
<span class="eg-grid__card-price-current">{{product.price | money}}</span>
</p>
</div>
</a>
</div>
{%- endfor -%}
{%- else -%}
{%- for i in (1..per_page) -%}
<div class="eg-grid__card">
<div class="eg-grid__card-img-wrap">
{{'product-1' | placeholder_svg_tag: 'eg-grid__card-img'}}
</div>
<div class="eg-grid__card-content">
<h3 class="eg-grid__card-title">サンプル商品 {{i}}</h3>
<p class="eg-grid__card-price">¥0</p>
</div>
</div>
{%- endfor -%}
{%- endif -%}
</div>
</div>
</section>
{% schema %}
{
"name":"ErgoList Grid",
"settings":[
{"type":"text","id":"eg_grid_heading","label":"見出し","default":"製品一覧"},
{"type":"collection","id":"eg_grid_collection","label":"コレクション"},
{"type":"range","id":"eg_grid_per_page","min":6,"max":24,"step":3,"label":"表示数","default":12},
{"type":"checkbox","id":"eg_grid_enable_filters","label":"フィルタ有効","default":true},
{"type":"checkbox","id":"eg_grid_enable_sort","label":"ソート有効","default":true},
{"type":"color","id":"eg_grid_bg","label":"背景色","default":"#ffffff"},
{"type":"color","id":"eg_grid_text","label":"テキスト色","default":"#000000"},
{"type":"range","id":"eg_grid_padding_top","min":0,"max":120,"step":8,"unit":"px","label":"上余白","default":60},
{"type":"range","id":"eg_grid_padding_bottom","min":0,"max":120,"step":8,"unit":"px","label":"下余白","default":60}
],
"presets":[{"name":"ErgoList Grid"}]
}
{% endschema %}
