class SPO{constructor(){this.tooltip=document.querySelector('[data-spo-tooltip]');if(!this.tooltip)return;this.init();}init(){const btns=document.querySelectorAll('.spo__info-btn');btns.forEach(btn=>{btn.addEventListener('mouseenter',(e)=>this.show(e));btn.addEventListener('mouseleave',()=>this.hide());btn.addEventListener('focus',(e)=>this.show(e));btn.addEventListener('blur',()=>this.hide());});}show(e){const text=e.target.closest('.spo__info-btn').dataset.tooltip;if(!text)return;this.tooltip.textContent=text;this.tooltip.classList.add('is-visible');this.tooltip.setAttribute('aria-hidden','false');this.position(e.target);}hide(){this.tooltip.classList.remove('is-visible');this.tooltip.setAttribute('aria-hidden','true');}position(el){const rect=el.getBoundingClientRect();const ttRect=this.tooltip.getBoundingClientRect();let top=rect.bottom+8;let left=rect.left+rect.width/2-ttRect.width/2;if(left+ttRect.width>window.innerWidth-16)left=window.innerWidth-ttRect.width-16;if(left<16)left=16;if(top+ttRect.height>window.innerHeight-16)top=rect.top-ttRect.height-8;this.tooltip.style.top=top+'px';this.tooltip.style.left=left+'px';}}
if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>new SPO());}else{new SPO();}
